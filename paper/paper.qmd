---
title: "Family Income and Educational Returns in China, 2010-2020: Higher Returns Favor the Wealthy, but Gaps Hold Steady"
author: 
  - Yisu Hou
thanks: "Code and data are available at: [https://github.com/YisuHou1/Educational_Returns_Analysis](https://github.com/YisuHou1/Educational_Returns_Analysis)."
date: today
date-format: long
abstract: "Economic returns to education are a key driver of socioeconomic mobility, yet they are not distributed equally across all income groups. Using data from the China Family Panel Studies (CFPS) between 2010 and 2020, this paper analyzes how family income influences the financial benefits individuals gain from education. The analysis reveals that individuals from wealthier families consistently enjoy significantly higher income returns from education compared to their lower-income counterparts, though this gap did not widen over the decade studied. These findings highlight persistent inequality in education's economic impact, emphasizing the need for policies that ensure education serves as a more effective equalizer in society."
format: pdf
header-includes:
  - \usepackage{float}
  - \usepackage{placeins}
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(caret)
library(glmnet)
library(nnet)
library(stringr)
library(gt)
library(knitr)
library(kableExtra)
library(MatchIt)
library(arrow)
```

# Introduction

Since the economic reform in China in 1978, China’s GDP per capita has increased more than 29 times [@NBSC2020]. However, this period of rapid economic growth has been accompanied by greater socioeconomic inequality. The increased stratification, along with a number of China specific policies, has pushed the GINI coefficient close to 0.5, and various studies have demonstrated that the majority of China’s wealth is concentrated in the hands of a few [@XieJin2015].

In examining the factors contributing to China’s increasing inequality, a multitude of social scientists highlight China’s education system. The correlation between socioeconomic status and education has been widely scrutinized. According to Esping-Andersen, "in modern capitalist society, the two main exclusionary devices through which the bourgeoisie structures and perpetuates itself as a class, are first, those surrounding the institutions of property, and second, academic or professional qualifications and credentials." [@EspingAndersen1982]

In China, educational attainment directly corresponds to future earnings. Research by Byron and Manaloto showed an approximate 4 percent increase in earnings for each year of schooling [@Byron1990], and Wu and Xie identified a rate of 4.7 percent [@Wu2003]. Jansen and Wu documented a significant rising trend of returns on education during China’s economic reform period from 1978 to 2005 [@Jansen2012]. Concurrently, China significantly expanded its higher education sector, raising the gross enrollment rate from 9.8 percent in 1998 to 24.2 percent in 2009 [@Wang2011]. As of 2022, the enrollment rate stands at 59.7 percent, indicating that China has fully transitioned from elite to mass higher education. Although increased access to higher education and higher returns on education are generally believed to foster social mobility, China’s inequality has worsened. To elucidate this paradoxical outcome, researchers found that the new educational opportunities are predominantly accessed by privileged groups, such as individuals with higher social status, males, and urban populations [@Ou2019].

Previous research has also investigated the reasons behind the educational gap between high and low-income individuals. In the 20th century, many theorists proposed theories examining the link between socioeconomic status and educational achievement. Some suggest that income-based segregation places low-income children in overcrowded classrooms with less adequately trained educators. Others argue that teachers may harbor negative attitudes towards low-income children, anticipating they will perform poorly academically, thereby creating a self-fulfilling prophecy [@Bond1981]. More recently, Duncan and Murnane suggested that the disparity in child enrichment expenditure influences academic performance, giving children from high-income families an advantage [@Duncan2014].

However, while the relationship between financial status and educational attainment is relatively well established, there is a dearth of research, especially in China, to explore the link between family financial status and the rate of return from education. This is an essential connection, as it signifies how effectively education translates into its ultimate outcome: income. The aim of this research is to fill this knowledge gap by examining whether individuals from different socioeconomic backgrounds in the Chinese population receive the same level of returns from education.

The estimand of this investigation is the disparities in educational returns among individuals from different family wealth quartiles during the decade 2020 to 2020, measured in the percent income increase per year of education received.

To arrive at a conclusion, national family and individual data from China Family Panel Studies [@cfps] from the year 2010 to 2020 were extracted. For the data in each CFPS iteration, Propensity Score Matching (PSM) was utilized to balance the control variables across different family wealth quartiles, and separate polynomial regressions were fit to identify the disparities of educational returns across quartiles. It was found that throughout the decade, individuals from wealthier families possessed a significant advantage over individuals from less wealthy families, with disparities reaching more than 3% income increase per year of education between some quartiles.

The body of the paper contains the data, model, results, and discussion sections. In order, @sec-data contains an overview of the data, the variables used, and the programming tools used in my analysis and interpretation of the data. @sec-model describes the model in detail and provides justification for it. @sec-results contains a run-down and explanation of the results and findings from the model, and @sec-discussion contains a discussion of the implications and limitations of the result, among others. The appendices contain a detailed examination of the methodologies of CFPS, as well as aspects of the data and analysis excluded from the body.

# Data {#sec-data}

## Overview

I used the statistical programming language R [@R] for the graphing, analysis and presentation of the project as a whole. Caret [@caret], glmnet [@glmnet; @glmnet2; @glmnet3], nnet [@nnet], tidyverse [@tidyverse], car [@car] MatchIt [@matchit] and arrow [@arrow] were used directly in the analysis of the data. Stringr [@stringr], dplyr [@dplyr], gt [@gt], knitr [@knitr], kableExtra [@kextra] and styler [@styler] were used in the presentation and/or styling of the data, graphs, and paper as a whole.

All data utilized in this study were sourced from various iterations of the China Family Community Survey [@cfps]. The CFPS is a nationwide community survey funded by 985 Program of Peking University and carried out by the Institute of Social Science Survey of Peking University. CFPS encompasses approximately 15,000 families across 25 provinces and aims to tracks them permanently since 2010. Its main objective is to gather data across three dimensions: individuals, households, and communities. To achieve this, CFPS comprises four sub-surveys that thoroughly investigates families, adults, and children, gathering data for thousands of variables. Given its expansive and representative sample and a wide range of variables, CFPS has become a staple dataset for research in Chinese social sciences. Alternative data sources for this study, such as China General Social Survey (CGSS) and China Social Survey (CSS) are also reliable but do not provide the same width of variables, especially concerning family units. For the purposes of this research, data was extracted from CFPS for the years 2010, 2012, 2014, 2016, 2018, and 2020.

## Measurement

The CFPS records survey data by directly sending agents to the homes of respondents, aiding respondents in the process of filling out a comprehensive survey about their families and themselves [@cfps]. The agents closely interact with the respondents as they complete the survey, ensuring that the recorded information is complete and appropriate. For example, the agent may require the respondent to input an answer for certain questions, even if the initial response of the respondent is "I don't know". Moreover, the majority of recorded variables in the CFPS surveys are categorical, and they may have ambiguous boundaries.

The direct interactions between respondents and agents may effectively maximize the rate of completion of CFPS surveys, but the forced responses might not accurately reflect the true opinions of the respondents, and the fact that an agent directly observes respondents as they fill our the survey may encourage them to conceal information or select answer choices that are considered ordinary.

Therefore, while the methods of measurement ensures a high level of professionalism and completion, the responses may be biased. This negatively impacts the dataset's capacity to reflect socioeconomic phenomenon in the real world, including the economic returns to education.

## Outcome variable

The variables presented in this section are variables in the polynomial regression model to identify returns to education, which is a coefficient of the model. This will be specified in @sec-model.

The outcome variable of the model is the natural logarithm of individuals' hourly wages. This variable is not directly available in CFPS. It was calculated by dividing individuals' yearly work hours from their yearly income. @fig-outcome shows its distribution in the aggregated survey data from all CFPS iterations between 2010 and 2020.

```{r}
#| echo: false
#| message: false
#| warning: false

data_2020 <- read_parquet(here::here("data/02-analysis_data/2020_analysis_data.parquet"))
data_2018 <- read_parquet(here::here("data/02-analysis_data/2018_analysis_data.parquet"))
data_2016 <- read_parquet(here::here("data/02-analysis_data/2016_analysis_data.parquet"))
data_2014 <- read_parquet(here::here("data/02-analysis_data/2014_analysis_data.parquet"))
data_2012 <- read_parquet(here::here("data/02-analysis_data/2012_analysis_data.parquet"))
data_2010 <- read_parquet(here::here("data/02-analysis_data/2010_analysis_data.parquet"))

# Make a combined dataset that includes all survey iterations
all_combined <- bind_rows(
  data_2020, data_2018, data_2016, data_2014, data_2012, data_2010
)
```

```{r}
#| label: fig-outcome
#| fig-cap: Natural Log of Individual Hourly Wage, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

# Outcome variable: ln hourly wage
ggplot(all_combined, aes(x = ln_hourly_wage)) +
  geom_histogram(
    fill = "#2c7bb6", # Aesthetic fill color (steel blue)
    color = "white", # Border color for bins
    alpha = 1 # Transparency of the fill
  ) +
  labs(
    x = "ln Hourly Wage",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  ) +
  # Add a vertical line for the mean percentage support
  geom_vline(
    aes(xintercept = mean(ln_hourly_wage, na.rm = TRUE)),
    color = "#d73027", # Aesthetic color (red)
    linetype = "dashed",
    size = 1
  ) +
  # Annotate the mean value on the plot
  annotate(
    "text",
    x = mean(all_combined$ln_hourly_wage, na.rm = TRUE) - 3, # Position text slightly to the right of the mean line
    y = Inf, # Position text at the top of the plot
    label = paste("Mean:", round(mean(all_combined$ln_hourly_wage, na.rm = TRUE), 1)),
    vjust = 2, # Vertical adjustment
    color = "#d73027",
    size = 5,
    fontface = "bold"
  )
```

\FloatBarrier

As displayed by @fig-outcome, the distribution of the natural log of hourly wage is close to a normal distribution, with a mean of 2.2 and most data points between 0 and 5. However, the range of values extends from around -9 to 12, representing individuals with extremely low and high income.

## Predictor variables

### Years of Education Received

Years of education is selected as the primary predictor in the model to identify economic returns to education. The theoretical framework for the model will be explained in @sec-model.

```{r}
#| label: fig-edu
#| fig-cap: Years of Education Received, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = years_of_education)) +
  geom_histogram(
    binwidth = 1,
    fill = "#2c7bb6", # Aesthetic fill color (steel blue)
    color = "white", # Border color for bins
    alpha = 1 # Transparency of the fill
  ) +
  labs(
    x = "Years of Education",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  ) +
  # Add a vertical line for the mean percentage support
  geom_vline(
    aes(xintercept = mean(years_of_education, na.rm = TRUE)),
    color = "#d73027", # Aesthetic color (red)
    linetype = "dashed",
    size = 1
  ) +
  # Annotate the mean value on the plot
  annotate(
    "text",
    x = mean(all_combined$years_of_education, na.rm = TRUE) + 2.5, # Position text slightly to the right of the mean line
    y = Inf, # Position text at the top of the plot
    label = paste("Mean:", round(mean(all_combined$years_of_education, na.rm = TRUE), 1)),
    vjust = 2, # Vertical adjustment
    color = "#d73027",
    size = 5,
    fontface = "bold"
  )
```

\FloatBarrier

As shown in @fig-edu, most individuals in the aggregate dataset take very specific values, such as 9, 12, and 15. This is because most iterations of the CFPS record education received as the highest level of education completed. During the data cleaning process, they were translated to their corresponding number of years. For example, an individual who completed high school receives a 12 for years of education. I am aware that this could be highly inaccurate, as individuals may skip or repeat a grade. This is a limitation of the study that will be fully discussed in @sec-discussion.

### Gender

In light of the burgeoning prominence of the gender wage gap as a global sociological concern in recent decades, extensive research has been undertaken to discern the connection between gender and income. Scholars discovered that Chinese females earned 84.4 percent of male wages in 1988 and 82.5 percent in 1995 [@GustafssonLi2000]. Zhang identified a 38.23 percent wage gap using 2004 data, demonstrating an exacerbation of the issue over time [@Zhang2006].

Beyond merely influencing wage, studies have found a direct bearing of gender on educational returns, particularly in China. Gustafsson and Li found that in 1988, a college diploma raised a woman’s income by 10.2 percent and a man’s income by 8.9 percent compared to high school graduates [@GustafssonLi2000]. In 1995, the values changed to 20.8 percent for women 15.5 percent for men. A more recent study questioned the real magnitude of the gender-based difference in educational returns, as Chinese couples often pool income together, and many females have access to their spouse’s income [@Hannum2013]. Nevertheless, the role of gender as a determinant influencing wage and educational returns is well-established. Thus, it was included as a predictor.

```{r}
#| label: fig-gender
#| fig-cap: Gender of Respondent, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = factor(gender, levels = c(0, 1), labels = c("Female", "Male")))) +
  geom_bar(fill = "#1f78b4", color = "white", alpha = 1) +
  labs(
    x = "Gender",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  )
```

\FloatBarrier

@fig-gender shows that there were significantly more male CFPS respondents than female respondents throughout 2010-2020.

### Work Experience

Work experience is another key variable in the model for educational returns. CFPS does not directly provide data for work experience, so potential work experience was created as a substitute.

Potential work experience was deduced with an individual’s age and their years of schooling. Established norms in labor economics prescribe the following age thresholds for labor market entry based on educational attainment: 17 for high-school dropouts, 19 for high-school graduates, 21 for high-school graduates with some college, and 23 for college graduates [@Borjas2003; @OttavianoPeri2012; @EdoRapoport2019]. Thus, potential work experience was calculated by subtracting the corresponding value from an individual's age. This assumes that individuals directly enter the labor market after completing their education, which is a strong assumption.

```{r}
#| label: fig-exp
#| fig-cap: Potential Years of Work Experience, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

# Potential work experience
ggplot(all_combined, aes(x = pot_work_years)) +
  geom_histogram(
    fill = "#2c7bb6", # Aesthetic fill color (steel blue)
    color = "white", # Border color for bins
    alpha = 1 # Transparency of the fill
  ) +
  labs(
    x = "Potential Years of Work Experience",
    y = "Frequency"
  ) +
  coord_cartesian(xlim = c(0, 60)) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  ) +
  # Add a vertical line for the mean percentage support
  geom_vline(
    aes(xintercept = mean(pot_work_years, na.rm = TRUE)),
    color = "#d73027", # Aesthetic color (red)
    linetype = "dashed",
    size = 1
  ) +
  # Annotate the mean value on the plot
  annotate(
    "text",
    x = mean(all_combined$pot_work_years, na.rm = TRUE) + 6, # Position text slightly to the right of the mean line
    y = Inf, # Position text at the top of the plot
    label = paste("Mean:", round(mean(all_combined$pot_work_years, na.rm = TRUE), 1)),
    vjust = 2, # Vertical adjustment
    color = "#d73027",
    size = 5,
    fontface = "bold"
  )
```

\FloatBarrier

@fig-exp shows that potential work experience is a right-skewed distribution with a mean of 17.8. This is expected, as it is unlikely for individuals to work for more than 40 years.

### City Hukou Status

The Hukou system in China, a household registration mechanism, classifies individuals into either rural or urban demographics based on their birth registration locale. Individuals with urban Hukou and live in major cities enjoy the lion share of quality education and opportunities to pursue higher education. According to Tam and Jiang, during the recent period of higher education expansion, urban students’ access to higher education rose sharply while rural students’ access stagnated, showing the growing advantage of urban students due to unequal distribution of educational resources [@Tam2015]. The scholars explained the widening gap by pointing to the expansion of vocational education, which were accessible to low-performing urban students who would not have had the opportunity to pursue higher education prior to the expansion. However, rural students were not provided with equal opportunities in vocational education.

How the Hukou system affects educational attainment is a complex topic that must be examined together with other phenomena in China. Local governments are responsible for educational institutions within its region, but rural governments only have a minimal proportion of the capital available to large cities; top universities are disproportionally located in major cities and are more available to individuals possessing a Hukou of those cities; migrant workers, or individuals who live in cities but do not hold a Hukou of the city they live in, do not have access to public schooling in the city and may only attend migrant schools with worse conditions and educational quality [@Wang2007].

Therefore, it is no surprise that urban Hukou holders have higher wages. Using data from 2005, scholars found a rural Hukou worker’s wage per hour is only 64 percent of an urban Hukou worker’s [@Xing2013].

```{r}
#| label: fig-hukou
#| fig-cap: Hukou Status of Respondent, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = factor(city_hukou, levels = c(0, 1), labels = c("Rural", "Urban")))) +
  geom_bar(fill = "#1f78b4", color = "white", alpha = 1) +
  labs(
    x = "Hukou Categorization",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  )
```

\FloatBarrier

@fig-hukou shows that there are a greater number of rural Hukou holders than urban Hukou holders among CFPS respondents. This accurately reflects the overall demographics of China, where the rural population is larger than the urban population.

### Marital Status

Studies have shown the magnifying effect of marriage on gendered income gaps, stemming from gender-based roles and expectations within familial settings. Wang and Wang demonstrated that unmarried Chinese men and women in 2015 had an average monthly income gap of 458.612 RMB, and married couples had a gap of 1398.80 RMB [@WangWang2020]. Married couples with children under 18 had an income gap that is more than doubled compared to those without children. Mu and Xie explained the after-marriage changes by addressing that fathers acquire a confidence boost after the birth of their children and dedicate themselves in the pursuit for higher wages and a successful career [@Mu2016]. On the other hand, mothers take the child-rearing role, accumulate less experience in the labor force, and choose less rigorous jobs to reserve energy for household work.

```{r}
#| label: fig-marry
#| fig-cap: Marital Status of Respondent, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = factor(is_married, levels = c(0, 1), labels = c("Unmarried", "Married")))) +
  geom_bar(fill = "#1f78b4", color = "white", alpha = 1) +
  labs(
    x = "Marital Status",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  )
```

\FloatBarrier

As displayed in @fig-marry, most respondents of CFPS are married.

### Communist Party Membership

Membership in the Communist Party of China (CCP) is frequently included in income related research within China [@GustafssonLi2000; @Hannum2013; @Mu2016]. Being a member of the CCP grants the opportunity for an individual to work in the government positions or state-owned enterprises that provide secure and well-paid jobs [@Dickson2014]. Moreover, party status is also related to the level of education, as the recruitment strategy of the CCP targets elite groups such as college and graduate students. This study followed established protocols and included CCP membership as a predictor, as its unique socio-political status in China necessitates its inclusion.

```{r}
#| label: fig-ccp
#| fig-cap: CCP Membership of Respondent, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = factor(is_party, levels = c(0, 1), labels = c("Not CCP Member", "CCP Member")))) +
  geom_bar(fill = "#1f78b4", color = "white", alpha = 1) +
  labs(
    x = "Party Membership",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  )
```

\FloatBarrier

@fig-ccp reflects that CCP members are only make up a small proportion of the Chinese population.

### Eastern Provinces

China's geographical East, encompassing 12 economically advanced provinces, is characterized by notable income disparities when compared to Central and Western regions. Scholars found that in 2005, Eastern populations not only had significantly greater income but also enjoyed doubled returns to education compared to other regions [@Xing2013]. Though the values shifted towards the national mean in 2011, significant differences still existed. Recent research endeavors on income and educational returns have increasingly incorporated the geographical East as a control variable, acknowledging its substantial influence on the variables of interest [@Dong2021].

```{r}
#| label: fig-east
#| fig-cap: Location of Residence, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = factor(is_east, levels = c(0, 1), labels = c("Other Provinces", "Eastern Provinces")))) +
  geom_bar(fill = "#1f78b4", color = "white", alpha = 1) +
  labs(
    x = "Area of Residency",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  )
```

\FloatBarrier

According to @fig-east, there exists a relatively balanced split between respondents residing in Eastern provinces and those living in other provinces. More individuals lived in non-Eastern provinces, counting to more than 20,000.

### Family Income Quartile

Family income quartile is not a variable directly incorporated in the regression model. Rather, data was split into subsets according to family income quartiles and regressed to find the educational returns of each quartile in comparison with one another. This is the focal variable of the study. Within the CFPS's family economics sub-survey, there exists a variable listing family income quartiles. For this study, family economics datasets were merged with the adult individuals dataset of the same CFPS iteration by matching personal IDs, thus deriving a corresponding family income quartile value for each adult participant.

```{r}
#| label: fig-quartiles
#| fig-cap: Family Income Quartiles, CFPS2010 to CFPS2020
#| echo: false
#| message: false
#| warning: false

ggplot(all_combined, aes(x = income_quartile)) +
  geom_bar(fill = "#1f78b4", color = "white", alpha = 1) +
  labs(
    x = "Family Income Quartile",
    y = "Frequency"
  ) +
  theme_minimal(base_size = 14) + # Minimal theme with increased base font size
  theme(
    plot.title = element_text(
      size = 16,
      face = "bold",
      hjust = 0.5, # Center the title
      margin = margin(b = 10) # Add space below the title
    ),
    plot.subtitle = element_text(
      size = 12,
      hjust = 0.5,
      margin = margin(b = 20) # Add space below the subtitle
    ),
    axis.title = element_text(face = "bold"), # Bold axis titles
    axis.text = element_text(color = "gray30"), # Dark gray axis text
    panel.grid.major = element_line(color = "gray80"), # Light gray major grid lines
    panel.grid.minor = element_blank() # Remove minor grid lines
  )
```

\FloatBarrier

The distribution shown in @fig-quartiles is counter intuitive, as there are more individuals who belong in upper quartiles. This does not suggest that CFPS uses an unrepresentative sample. The data of individuals in upper family income quartiles are relatively more complete, thus more data points are kept after the data cleaning process. Despite the relative lack of data for the lower quartiles, the number of data points is still sufficient for this study.

# Model {#sec-model}

The goal of my modelling strategy is twofold. First, I must split the data from each CFPS iteration into family income quartiles and adjust them to be directly comparable with one another. Second, I wish to calculate each quartile's returns to education, in terms of percent income increase per year of education, to complete the comparison.

To accomplish the first task, Propensity Score Matching was utilized.

Historically, research on returns to education primarily relied on directly calculating the rate of return using the Mincer Earnings Function. They incorporated control variables into the regression to account for their influence on income [@Byron1990; @Zhang2006]. When desiring to make group comparisons, scholars generally subdivided data based on specific variables of interest such as gender, location, and industry. They then performed direct regressions to contrast the coefficients [@Gustafsson2000, @Mu2016].

While multivariate regression effectively captures the impact of control variables, its functionality hinges on the linear relationships between the outcome and covariates. Dehejia and Wahba revealed that regressing groups with significant variances in the mean values of covariates could yield misleading results for the variable of interest, potentially overstating the differences between groups [@Dehejia2002]. Propensity Score Matching (PSM) addresses this issue by isolating the treatment effect. Therefore, this study employed a combined method: first balancing covariates using PSM, then executing regressions to adjust for residual differences.

For this study, data from each CFPS iteration were divided into four subsets based on family income quartiles. PSM was then applied to match each subset with others, resulting in six pairs of subsets that exhibited different treatment variable values (family income quartiles) but had similar means for control variables. The matching was conducted using the nearest-neighbor approach with $caliper = 0.1sd$, which is more strict compared to the generally recommended 0.2 threshold for caliper width [@Austin2011]. This choice was intentional, as reducing the caliper width improved the covariate balance without significantly reducing the number of data points. Given that lower family income quartiles had fewer data points, match ratios were adjusted based on the counts within the quartiles being matched.

To show the effects of PSM, @tbl-match provides a summary of balance for the match between the Quartile 1 and the Quartile 2 subset of CFPS 2020. The match was executed using caliper = 0.1 and a ratio of 2, matching 1041 Quartile 2 instances out of 1324 total instances with all 541 Quartile 1 instances. This matching procedure was repeated 6 times to compare each quartile with every other quartile for all 6 CFPS iterations from 2010 to 2020.

```{r}
#| label: tbl-match
#| tbl-cap: Summary of Balance for Quartile 1 vs Quartile 2 Match, 2020 Data
#| echo: false
#| message: false
#| warning: false


# Data computed from model_data script
data <- data.frame(
  Variables = c("distance", "Gender", "Work exp", "City Hukou", "Marital Status", "CCP", "East"),
  `Means Q1` = c(0.3016, 0.5712, 14.8817, 0.1072, 0.7375, 0.0240, 0.2810),
  `Means Q2` = c(0.2854, 0.5650, 14.1767, 0.1971, 0.7515, 0.0219, 0.3112),
  `Std Mean Diff` = c(0.3099, 0.0125, 0.0866, -0.2907, -0.0318, 0.0139, -0.0672),
  `Means Q1 Matched` = c(0.3016, 0.5712, 14.8817, 0.1072, 0.7375, 0.0240, 0.2810),
  `Means Q2 Matched` = c(0.3009, 0.5675, 14.7902, 0.1100, 0.7366, 0.0222, 0.2810),
  `Std Mean Diff M` = c(0.0139, 0.0075, 0.0112, -0.0090, 0.0021, 0.0121, 0.0000)
)

kable(
  data,
  format = "latex"
) %>%
  kable_styling(
    latex_options = c("striped", "hold_position", "scale_down"), 
    position = "center",
    full_width = FALSE
  )
```
\FloatBarrier

For the second task, a multivariate regression model was created using the theoretical framework of the Mincer Earnings Function [@Mincer1974]. The function depicts wage as a function of schooling and work experience. Its original form is:
$$ln(w) = f(s, x) = ln(w_0) +\rho s + \beta_1x + \beta_2x^2$$
Where $w$ is hourly wage, $w_0$ is the wage level of an individual with 0 years of schooling and work experience, $s$ is years of schooling, $x$ is work experience, and $\rho$, $\beta_1$, and $\beta_2$ are coefficients that can be viewed as the rates of return to schooling and work experience.

Numerous researchers have since tailored the Mincer equation by incorporating potential confounders, ensuring the mitigation of biased outcomes. A seminal study analyzing Chinese educational returns used the function:
$$ln(Y) = α_0 +α_1Edu +α_2Exper +α_3Exper^2+∑λ_jX+μ$$
Which adds $X$ that represents control variables such as age, gender, and geographical location [@Zhang2006]. Analogous modifications can be observed globally, although with variable inclusions that reflect regional societal and cultural differences. For example, an Indian study choose to include caste, relationship to the head of household, and the ability to speak and write English in the equation as control variables [@Bhandari2006]. This research also leaned on a modified version of the Mincer Earnings Function for its calculations on educational returns.

It is acknowledged that the regression models may be inconsistent due to the inconsistencies in the variables and measurements of different CFPS iterations. The incorporation of calculated variables is an additional factor impacting the models' ability to calculate returns to education.

## Model set-up

### Multivariate regression models

Employing PSM-matched subsets, the educational returns for different family income quartile groups were computed using the modified Mincer Function:
$$ ln(w) = α_0 +α_1Edu +α_2Exp +α_3Exp^2 +α_4Gender \\ +α_5Hukou +α_6Marriage +α_7CCP +α_8East +μ$$
With $w$ representing hourly wage, $α_1$ representing returns to education and other coefficients representing the effects of previously identified covariates on the natural log of income. 

Next, PSM-matched subset pairs were separated by family income quartiles and regressed independently to identify the differences between educational returns and the coefficients of covariates.

Finally, the Delta coefficient $\alpha_1$ from all paired comparisons across every CFPS iteration were compiled together to identify cross-quartile education return disparities over time.

As a test of model robustness, another set of regressions were ran without PSM to verify the overall significance of educational returns and the consistent pattern observed between quartiles. This will be discussed further in @sec-results.

# Results {#sec-results}

```{r}
#| echo: false
#| message: false
#| warning: false

# Load all the models
# Define the path to the models folder
models_path <- here::here("models")

# List all RDS files in the models folder
model_files <- list.files(
  path = models_path,
  pattern = "\\.rds$",    
  full.names = TRUE       
)

# Load each RDS file and store in a list
models <- lapply(model_files, readRDS)

# Assign names to the list based on the filenames (without .rds)
names(models) <- tools::file_path_sans_ext(basename(model_files))

```

## Cross-quartile disparities in Educational Returns

```{r}
#| label: tbl-results
#| tbl-cap: Cross-Quartile Percentage Disparities of Returns to Education Over Time
#| echo: false
#| message: false
#| warning: false

library(knitr)
library(kableExtra)

# Data
data <- data.frame(
  `CFPS Year` = c(2020, 2018, 2016, 2014, 2012, 2010, "Temporal mean"),
  `Q1vsQ2` = c(0.9482, 0.2441, 0.7665, -2.3488, 1.2055, 0.4988, 0.2191),
  `Q1vsQ3` = c(1.9092, 2.3463, 1.2655, -1.1069, 0.9527, 3.0412, 1.4013),
  `Q1vsQ4` = c(4.1670, 3.9833, 4.5967, 0.6399, 3.1572, 5.6921, 3.7060),
  `Q2vsQ3` = c(1.2350, 1.7767, 1.2912, 0.2706, -0.0212, 2.1727, 1.1208),
  `Q2vsQ4` = c(3.1601, 3.3524, 3.9390, 3.3242, 3.7233, 4.9265, 3.7376),
  `Q3vsQ4` = c(2.2804, 3.7010, 3.1417, 3.1945, 4.4302, 2.1920, 3.1566),
  `Cross Sectional Mean` = c(2.2833, 2.5673, 2.5001, 0.6623, 2.2413, 3.0872, ' ')
)

# Create the table
kable(
  data,
  format = "latex"
) %>%
  kable_styling(
    latex_options = c("striped", "hold_position", "scale_down"), 
    position = "center",
    full_width = FALSE
  )


```
\FloatBarrier
Note: In 2012, educational returns for Q1, Q2, and Q3 were insignificant. In 2010, educational returns for Q1 and Q2 were insignificant. 

As @tbl-results shows, in most CFPS iterations, individuals from higher family income quartiles demonstrated a significant advantage in terms of returns to education compared to their counterparts in other quartiles. The greatest differences were observed when comparing the highest income quartile (Q4) to other quartiles. Over all CFPS iterations, individuals in the top quartile benefitted from 3.71% more gains in income from an additional year of education compared to the lowest quartile, 3.74% more than the second quartile, and 3.16% more than the third quartile on average. Comparatively, the differences between the other quartiles were less pronounced.

Upon evaluating cross-sectional means, no discernible upward or downward trend was identified. Other than the outlier year 2014, individuals from higher quartiles experienced around 2 to 3 percent greater educational returns on average compared to individuals from relatively lower quartiles. Thus, a general inference can be made: while those in the higher family income quartiles consistently enjoy significant benefits in terms of returns to education, this advantage has not expanded over time.

## Robustness testing

```{r}
#| label: tbl-robust
#| tbl-cap: Quartiles’ Percentage Returns to Education Over Time Without PSM
#| echo: false
#| message: false
#| warning: false

library(knitr)
library(kableExtra)

data <- data.frame(
  `CFPS Year` = c(2020, 2018, 2016, 2014, 2012, 2010),
  `Q1 Returns` = c('4.9507***', '4.1730**', '2.5671*', '4.4464**', '-1.0031', '0.1803'),
  `Q2 Returns` = c('5.8130***', '4.0239***', '3.0501***', '2.5357**', '0.0590', '1.1116'),
  `Q3 Returns` = c('7.3284***', '6.1466***', '4.1665***', '2.8027***', '0.4928', '3.9577***'),
  `Q4 Returns` = c('10.3891***', '9.1724***', '6.9051***', '6.3410***', '4.4870***', '8.0710***')
)

kable(
  data,
  format = "latex"
) %>%
  kable_styling(
    latex_options = c("striped", "hold_position", "scale_down"), 
    position = "center",
    full_width = FALSE
  )


```
\FloatBarrier
Significant codes: * = p < 0.05, ** = p < 0.01,  *** = p < 0.001

When directly regressing without matching, the significance of educational returns coefficients remained the same; the coefficients for Q1, Q2 and Q3 of CFPS2012 and the coefficients for Q1 and Q2 of CFPS2010 are the only ones insignificant at the 5% level. It is uncertain why educational returns are insignificant for these family income quartiles, both in the matched data and the unmatched data. It might be caused by the legacy data collection methods or the changes in variable recording that occurred after the 2012 iteration. Despite that, the outcome of the robustness test demonstrates the model's consistency.

# Discussion {#sec-discussion}

## Takeaways

This paper investigates how family income influences the economic returns to education in China from 2010 to 2020 using data from the China Family Panel Studies (CFPS). Propensity Score Matching (PSM) and multivariate regression models were utilized to analyze cross-quartile disparities.

The study reveals that individuals from wealthier families consistently experience significantly higher income returns from education compared to those from lower-income families. These disparities are particularly pronounced when comparing the highest income quartile to the other quartiles. However, the gap in returns has remained stable over the studied decade, suggesting persistent inequality without evidence of widening.

From this research, we learn about the role of socioeconomic background in shaping the economic benefits of education in China. The finding that the highest income quartile produces significantly greater disparities than other quartiles hints that being a member of the middle class does not necessarily imply better social mobility compared to the lower class, but being in the upper class produces greater economic benefits for the working individual. On the large scale, it highlights a fundamental limitation in the equalizing potential of education, as the higher financial returns to education predominantly favor individuals from wealthier families. This underscores the need for targeted policies to address these disparities and enhance education's role as a tool for socioeconomic mobility; merely expanding higher education may not be sufficient.

## Weaknesses and next steps

This research has a number of limitations. First, the data from CFPS has poor completion rates for some of the variables. Many individuals from lower income quartiles did not respond to questions such as weekly hours worked or income. This caused the data used in this research to include more individuals from higher quartiles, increasing bias. The second limitation is that the sample changed over time as individuals responded differently in different CFPS iterations. One of the greatest benefits of CFPS is that it follows the same pool of families over time, but the data for this study did not include the same set of individuals throughout different CFPS iterations because respondents left different questions unanswered in different years. Consequently, the sample sizes and the individuals making up the samples were different for each year, making the temporal analysis less conclusive. Finally, this research calculated returns to education using the Miner equation, which has a set of limitations. Besides the problem of linearity, it also assumes that all covariates influencing income are included in the model, which might not be the case. Additionally, the model only provides a general statement on the overall returns to education of different family income quartiles and does not provide insight to the reasons behind the differences. 

For further research, one may execute further divisions in terms of educational stages and examine whether the difference of returns for various educational stages can explain the difference in overall educational returns between income groups.

\newpage

\appendix

# Appendix {.unnumbered}

## Survey methodology overview and evaluation


## Idealised methodology


\newpage

# References
